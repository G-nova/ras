(function(e,t,n,r){function o(t,n){this.element=t;var r=this,o=e(r.element),u=o.children(),a=u.length,f=o.parent();o.wrap('<div id="AllRASContainer"/>');this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init();e.fn.RAS.slide=function(e,t,n,i){r.slide(e,t,n,i)};e.fn.RAS.fade=function(e,t,n,i){r.fade(e,t,n,i)}}var i="RAS",s={animation:"slide",countNav:false,carousel:false,carouselNumber:3,duration:400,carouselVisibleWidth:"null",textPrev:"prev",textNext:"next"};o.prototype={init:function(){var r=this,i=e(r.element),s=i.children(),o='<div id="navRAS"><button title="Navigation slider Précédent" class="btnSlideRAS prev">'+this.options.textPrev+'</button><button title="Navigation slider Suivant"  class="btnSlideRAS next">'+this.options.textNext+"</button></div>",u=s.length,a=i.parent();i.wrap('<div id="RASContainer" style="width:100%; overflow:hidden;"/>'),$RASContainer=i.parent();if(u>1){$RASContainer.before(o);var f=$RASContainer.prev("#navRAS"),l=f.next().children(),c=e(r.element),s=c.children(),h=c.parent(),p=e(t).width();s.css({"float":"left",position:"relative"}).each(function(t){e(this).attr("data-slide",t)});e("img").load(function(){r.heightElement(s,c)});var d=a.width(),v=d;c.css({width:v*u}).attr("data-width",v);if(this.options.carousel==false){e("img").load(function(){c.css({width:d*u}).attr("data-width",d);s.css({width:d,position:"relative"})})}else{var m=this.options.carouselNumber,g=s.length,y=this.options.carouselVisibleWidth;if(g>m&&y=="null"){for(var b=0;b<s.length;b=b+m){s.css({width:100/m+"%"}).slice(b,b+m).wrapAll('<div class="slide" style="float:left; width:'+d+'px;"/>')}}else{if(y>p){y=p}s.css({width:y,"float":"none",display:"inline-block","white-space":"normal","vertical-align":"top"});c.css({width:"100%","white-space":"nowrap"}).attr("data-width",y)}e("img").load(function(){r.heightElement(s,e(".slide"))})}if(this.options.countNav==true){var w=[],E=c[0].id;for(var b=0;b<u;b++){w[b]="<button>"+b+"</button>"}var S='<ul id="'+E+'Nav"><li>'+w.join("</li><li>")+"</li></ul>";$RASContainer.before(S);l.children(":first").addClass("active");var x=e("#"+E+"Nav").children();e("#"+E+"Nav").children(":first").addClass("active");x.each(function(t){e(this).bind("click",function(){x.removeClass("active");e(this).addClass("active");var t=e(this).text(),n=l.children(".active").data("slide"),i=r.options.animation;if(t==n){}else{if(i=="slide"){r.slide(l,"next",r.options.duration,t)}else if(i=="fade"){r.fade(l,"next",r.options.duration,t)}}})})}f.find(".prev").bind("click",function(){var e=r.options.duration,t=r.options.carouselVisibleWidth,n=r.options.animation;if(n=="slide"){r.slide(l,"prev",e,"null")}else if(n=="fade"&&t=="null"){r.fade(l,"prev",e,"null")}});f.find(".next").bind("click",function(){var e=r.options.duration,t=r.options.carouselVisibleWidth,n=r.options.animation;if(n=="slide"){r.slide(l,"next",e,"null")}else if(n=="fade"&&t=="null"){r.fade(l,"next",e,"null")}});e(n).keyup(function(e){if(e.keyCode==37){r.slide(l,"prev",r.options.duration,"null")}else if(e.keyCode==39){r.slide(l,"next",r.options.duration,"null")}});e(t).resize(function(){var e=a.width();r.resizeMe(c,e)})}},slide:function(t,n,r,i){var s=t.data("width"),o=t.width();if(this.options.carouselVisibleWidth=="null"){}else{if(s>o){s=o}else{s=this.options.carouselVisibleWidth}}if(i=="null"){var u=t.children(":first"),a=t.children(":last");if(n=="prev"){t.children().css({"margin-left":0});a.prependTo(t).css({"margin-left":"-"+s+"px"}).animate({"margin-left":0},r)}else if(n=="next"){u.animate({"margin-left":"-"+s+"px"},r,function(){e(this).css({"margin-left":0}).appendTo(t)})}}else{t.children().removeClass("active");var f=t.children('[data-slide="'+i+'"]'),l=f.prevAll(),c=l.length;Array.prototype.reverse.call(l);f.addClass("active");t.animate({"margin-left":"-"+s*c+"px"},r,function(){l.appendTo(t);e(this).css({"margin-left":0})})}},fade:function(t,n,r,i){var s=t.children(":first"),o=t.children(":last");t.children().show();if(n=="prev"){s.fadeOut();o.hide().prependTo(t).fadeIn(r)}else if(n=="next"){s.fadeOut(r/2,function(){e(this).appendTo(t)})}},resizeMe:function(e,t){var n=e.children(),r=n.length,i=e.parent().prev();if(this.options.carouselVisibleWidth=="null"){var s=t,o=s;e.css({width:o*r}).attr("data-width",o);n.css({width:o,position:"relative"})}else{var u=this.options.carouselVisibleWidth;function a(t){e.css({width:t}).attr("data-width",t);n.css({width:t,position:"relative"})}if(u>t){a(t)}else{a(u)}}this.heightElement(n,e)},heightElement:function(t,n){var r=0;t.each(function(){var t=e(this).height();if(t>r){r=t}});n.height(r);n.parent().height(r).attr("data-height",r)}};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}})(jQuery,window,document)